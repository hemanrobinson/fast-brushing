(this.webpackJsonpbrush=this.webpackJsonpbrush||[]).push([[0],{84:function(e,t,i){},86:function(e,t,i){},87:function(e,t,i){},92:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i(0),s=i.n(n),r=i(15),o=i.n(r),h=(i(84),i(23)),l=i(103),c=i(5),d=function(e){};d.isSelected=[],d.deselectAll=function(){d.isSelected.fill(!1)},d.getColumnNames=function(){return["isSelected","A","B","A + B","A * B"]},d.getDomain=function(e,t){return[-2,2]},d.values=[],d.getValues=function(e){if(d.values.length!==e){var t=c.a(0,.5);d.values=[];for(var i=0;i<e;i++){var a=t(),n=t();d.values[i]=[!1,a,n,a+n,a*n]}}return d.values};var u=d,b=function(e){};b.draw=function(e,t,i,a,n,s,r){var o=n.getContext("2d"),h=u.getColumnNames();o.fillStyle="#000000",o.fontSize="14px";var l=h[r];o.fillText(l,e+i/2-o.measureText(l).width/2,t+a-a/2+4),o.fontSize="10px",l=(""+u.getDomain(s,r)[0]).slice(0,4),o.fillText(l,e+4,t+a-4),l=(""+u.getDomain(s,r)[1]).slice(0,3),o.fillText(l,e+i-3-o.measureText(l).width,t+12)};var f=b,g=function(e){};g.padding=10,g.normalize=function(e){var t=e.x,i=e.y,a=e.width,n=e.height;return a<0&&(t+=a,a=-a),n<0&&(i+=n,n=-n),{x:t,y:i,width:a,height:n}},g.isWithin=function(e,t,i){var a=g.normalize(t);return void 0!==i&&(a.x-=i,a.y-=i,a.width+=2*i,a.height+=2*i),a.x<=e.x&&e.x<a.x+a.width&&a.y<=e.y&&e.y<a.y+a.height},g.draw=function(e,t,i,a,n,s,r,o,h,l,d){var b=n.getContext("2d"),f=g.padding,w=u.getValues(s),x=c.b().domain(u.getDomain(s,r)).range([e+f,e+i-f]),m=c.b().domain(u.getDomain(s,o)).range([t+a-f,t+f]),p=l;if(void 0===p){var v=(p=b.createImageData(i,a)).data;w.forEach((function(n){var s=x(n[r])-e,l=m(n[o])-t;if(0<=s&&s<i&&0<=l&&l<a){var c=Math.floor(l)*(4*i)+4*Math.floor(s);v[c]=Math.round(0+v[c]*(1-h)),v[c+1]=Math.round(0+v[c+1]*(1-h)),v[c+2]=Math.round(0+v[c+2]*(1-h)),v[c+3]=Math.round(255*h+v[c+3]*(1-h))}}))}var j=b.createImageData(i,a);j.data.set(p.data);var y=j.data;if(void 0!==d)d.forEach((function(n){var s=x(w[n][r])-e,l=m(w[n][o])-t;if(0<=s&&s<i&&0<=l&&l<a){var c=Math.floor(l)*(4*i)+4*Math.floor(s);y[c]=Math.round(255+y[c]*(1-h))}}));else{var M=0;w.forEach((function(n){if(u.isSelected[M]){var s=x(n[r])-e,l=m(n[o])-t;if(0<=s&&s<i&&0<=l&&l<a){var c=Math.floor(l)*(4*i)+4*Math.floor(s);y[c]=Math.round(255+y[c]*(1-h))}}M++}))}return b.putImageData(j,e,t,f,f,i-2*f,a-2*f),p},g.select=function(e,t,i,a,n,s,r,o){var h=g.padding,l=[],d=u.getValues(n),b=c.b().domain(u.getDomain(n,s)).range([e+h,e+i-h]),f=c.b().domain(u.getDomain(n,r)).range([t+a-h,t+h]),w=b.invert(Math.min(o.x,o.x+o.width)),x=b.invert(Math.max(o.x,o.x+o.width)),m=f.invert(Math.max(o.y,o.y+o.height)),p=f.invert(Math.min(o.y,o.y+o.height)),v=0;return d.forEach((function(e){u.isSelected[v]=w<=e[s]&&e[s]<x&&m<=e[r]&&e[r]<p,u.isSelected[v]&&l.push(v),v++})),l};var w=g,x=(i(86),function e(t){var i=200,s=200,r=Object(n.useRef)(),o=t.nData,h=t.opacity,l=u.getColumnNames().length,c=function(t){e.onMouseUp(t,i,s,r,o,h)};return Object(n.useEffect)((function(){var t=e.brush;e.downLocation={x:t.x,y:t.y};var a={type:"mouseup",nativeEvent:{offsetX:t.x+t.width,offsetY:t.y+t.height}};e.onMouseUp(a,i,s,r,o,h),e.draw(i,s,r,o,h)})),Object(a.jsx)("canvas",{width:(l-1)*i,height:(l-1)*s,ref:r,onMouseDown:function(t){e.onMouseDown(t)},onMouseMove:c,onMouseUp:c})});x.handleSize=3,x.isGrowing=!1,x.isXMin=!1,x.isYMin=!1,x.isMoving=!1,x.isWithin=!1,x.bitmaps=void 0,x.selectedRows=void 0,x.brush={x:460,y:260,width:40,height:40},x.downLocation={x:-1,y:-1},x.clear=function(){x.bitmaps=void 0,x.selectedRows=void 0,u.deselectAll(),x.brush={x:-1,y:-1,width:0,height:0},x.downLocation={x:-1,y:-1}},x.onMouseDown=function(e){var t=x.handleSize,i=t/2,a=2*t,n=e.nativeEvent.offsetX,s=e.nativeEvent.offsetY,r=x.brush;if(e.preventDefault(),x.downLocation.x=n,x.downLocation.y=s,w.isWithin({x:n,y:s},r,x.handleSize)){var o=!1,h=!1,l=!1,c=!1;r.width>=0?Math.abs(r.x+r.width-i-n)<=a?h=!0:Math.abs(r.x+i-n)<=a&&(o=!0):Math.abs(r.x+r.width+i-n)<=a?o=!0:Math.abs(r.x-i-n)<=a&&(h=!0),r.height>=0?Math.abs(r.y+r.height-i-s)<=a?l=!0:Math.abs(r.y+i-s)<=a&&(c=!0):Math.abs(r.y+r.height+i-s)<=a?c=!0:Math.abs(r.y-i-s)<=a&&(l=!0),x.isGrowing=!1,x.isMoving=!1,(o||h)&&(l||c)?(x.isGrowing=!0,x.isXMin=o,x.isYMin=l):x.isMoving=!0}else x.brush.x=n,x.brush.y=s,x.brush.width=0,x.brush.height=0,x.isGrowing=!0,x.isXMin=!1,x.isYMin=!0,x.isMoving=!1;x.isWithin=!0},x.onMouseUp=function(e,t,i,a,n,s){var r=x.downLocation.x,o=x.downLocation.y,h=e.nativeEvent.offsetX,l=e.nativeEvent.offsetY,c=Math.floor(r/t),d=Math.floor(o/i),b=c*t,f=d*i,g=x.brush;if(r<0||o<0){var m=Math.floor(h/t),p=Math.floor(l/i),v=Math.floor(g.x/t),j=Math.floor(g.y/i),y=m===v&&p===j;if(x.isWithin!==y){if(x.isWithin=y,!y){var M=a.current,O=v*t,S=j*i;M.getContext("2d").clearRect(O+1,S+1,t-1,i-1),w.draw(O,S,t,i,M,n,v+1,j+1,s,x.bitmaps[v][j],x.selectedRows)}x.drawBrush(a)}}else c===d?"mouseup"===e.type&&(u.deselectAll(),x.selectedRows=void 0,x.draw(t,i,a,n,s)):(x.isGrowing?(h=Math.min(b+t-1,Math.max(b+1,h)),l=Math.min(f+i-1,Math.max(f+1,l)),x.isXMin?(g.width-=h-g.x,g.x=h):g.width=h-g.x,x.isYMin?g.height=l-g.y:(g.height-=l-g.y,g.y=l)):x.isMoving&&(g.x+=h-r,g.y+=l-o,x.downLocation.x=h,x.downLocation.y=l,g.x<b+1&&(g.x=b+1),g.x>b+t-1-g.width&&(g.x=b+t-1-g.width),g.y<f+1&&(g.y=f+1),g.y>f+i-1-g.height&&(g.y=f+i-1-g.height)),x.selectedRows=w.select(b,f,t,i,n,c+1,d+1,g),x.draw(t,i,a,n,s));"mouseup"===e.type&&(x.downLocation.x=-1,x.downLocation.y=-1,x.isGrowing=!1,x.isXMin=!1,x.isYMin=!1,x.isMoving=!1,g.width<0&&(g.x+=g.width,g.width=-g.width),g.height<0&&(g.y+=g.height,g.height=-g.height))},x.draw=function(e,t,i,a,n){if(i){var s=i.current,r=s.getContext("2d"),o=u.getColumnNames().length;if(r){r.clearRect(0,0,(o-1)*e,(o-1)*t),r.strokeStyle="#a0a0a0";for(var h=1;h<o-1;h++)r.moveTo(h*e+.5,0),r.lineTo(h*e+.5,(o-1)*t),r.moveTo(0,h*t+.5),r.lineTo((o-1)*e,h*t+.5);r.stroke();var l=!x.bitmaps;l&&(x.bitmaps=[]);for(var c=1;c<o;c++)for(var d=1;d<o;d++){var b=(c-1)*e,g=(d-1)*t;c===d?f.draw(b,g,e,t,s,a,c):l?(void 0===x.bitmaps[c-1]&&(x.bitmaps[c-1]=[]),x.bitmaps[c-1][d-1]=w.draw(b,g,e,t,s,a,c,d,n)):w.draw(b,g,e,t,s,a,c,d,n,x.bitmaps[c-1][d-1],x.selectedRows)}x.drawBrush(i)}}},x.drawBrush=function(e){var t=x.brush;if(t.x>=0&&t.y>=0){var i=x.handleSize,a=w.normalize(t);a.x=Math.floor(a.x)+.5,a.y=Math.floor(a.y)+.5,a.width=Math.round(a.width),a.height=Math.round(a.height);var n=e.current.getContext("2d");n.strokeStyle="#99bbdd",n.fillStyle="#99bbdd",n.strokeRect(a.x,a.y,a.width,a.height),x.isWithin&&a.width>=i&&a.height>=i&&(n.fillRect(a.x+1,a.y+1,i,i),n.fillRect(a.x+a.width-i-1,a.y+1,i,i),n.fillRect(a.x+1,a.y+a.height-i-1,i,i),n.fillRect(a.x+a.width-i-1,a.y+a.height-i-1,i,i))}};var m=x,p=(i(87),function e(){var t=Object(n.useState)(e.getPower(12)),i=Object(h.a)(t,2),s=i[0],r=i[1],o=Object(n.useState)(.5),c=Object(h.a)(o,2),d=c[0],u=c[1];return Object(a.jsxs)("div",{className:"Column",children:[Object(a.jsxs)("div",{className:"Description",children:[Object(a.jsx)("h1",{children:"Persistent Brushing"}),Object(a.jsxs)("p",{children:["Brushing is a basic technique of exploratory data analysis, developed in the 1970s (",Object(a.jsx)("a",{href:"https://www.researchgate.net/publication/245345268_An_interactive_multidimensional_data_display_and_analysis_system",children:"Fishkeller, Friedman, and Tukey"}),") and 1980s (",Object(a.jsx)("a",{href:"https://www.jstor.org/stable/1269768?seq=1",children:"Becker and Cleveland"}),"; ",Object(a.jsx)("a",{href:"https://www.jstor.org/stable/2289448?seq=1",children:"Stuetzle"}),").  Back then, analysts were happy to brush a few hundred points.  On modern hardware, we can brush a million."]}),Object(a.jsx)("p",{children:"Drag the brush to select the points.  Drag the corners to resize the brush.  Drag a rectangle in any plot to create a new brush."})]}),Object(a.jsx)("div",{className:"GridPlots",children:Object(a.jsx)(m,{nData:s,opacity:d})}),Object(a.jsxs)("div",{className:"GridControls",children:[Object(a.jsx)("label",{children:"Points:"}),Object(a.jsx)(l.a,{defaultValue:12,step:1,min:6,max:18,valueLabelDisplay:"auto",marks:!0,valueLabelFormat:function(t){return e.getPower(t).toExponential()},onChangeCommitted:function(t,i){m.clear(),r(e.getPower(i))}}),Object(a.jsx)("label",{children:"Transparency:"}),Object(a.jsx)(l.a,{defaultValue:.5,step:.01,min:0,max:1,valueLabelDisplay:"auto",onChangeCommitted:function(e,t){m.clear(),u(1-t)}})]}),Object(a.jsxs)("div",{className:"Description",children:[Object(a.jsx)("h2",{children:"Design Notes"}),Object(a.jsxs)("p",{children:["This is an implementation of ",Object(a.jsx)("a",{href:"http://www.sci.utah.edu/~kpotter/Library/Papers/becker:1987:BS/index.html",children:"Becker and Cleveland's scatter plot matrix"}),".  To minimize distraction, the plots display no axes, but only the range of the data.  The purpose of this graph is not to show precise locations of points, but to help discover patterns, especially two-dimensional relationships in the data."]}),Object(a.jsx)("p",{children:"To optimize performance, CANVAS is used instead of SVG, and bitmap images are cached of the deselected points.  Thus drawing a plot requires only bit-blitting an image, then highlighting the selected points.  Iteration is done over a list of selected points, rather than the entire data set."}),Object(a.jsx)("p",{children:"Some brushing implementations increase the size of selected points.  Increased size increases overplotting, so it's better to use color."}),Object(a.jsx)("p",{children:"Colors are chosen to emphasize the data.  Black on white gives maximum emphasis.  The red selection color draws attention.  The grid, being less important, is gray.  For the same reason, the brush could be drawn in gray; however, blue is the default selection color in most web browsers."}),Object(a.jsx)("p",{children:"Affordances are visible.  The user can see the handles to resize the brush.  This eases the learning curve for novice users."}),Object(a.jsx)("p",{children:"To minimize distraction from the data display, handles are displayed only when they can be used."}),Object(a.jsxs)("p",{children:["The brush is ",Object(a.jsx)("em",{children:"persistent"})," rather than ",Object(a.jsx)("em",{children:"transient"}),".  A persistent brush reduces errors by giving the user repeated chances to adjust the brush size.  Also, a persistent brush supports sharing the result of data exploration."]}),Object(a.jsx)("br",{}),Object(a.jsx)("h2",{children:"References"}),Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:[Object(a.jsx)("a",{href:"https://www.researchgate.net/publication/245345268_An_interactive_multidimensional_data_display_and_analysis_system",children:"Fishkeller, Friedman, and Tukey (1974). \u201cPRIM-9: An Interactive Multidimensional Data Display and Analysis System\u201d SLAC-PUB-1408. Stanford, CA: Stanford Linear Accelerator Center."}),Object(a.jsx)("br",{})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("a",{href:"https://www.jstor.org/stable/1269768?seq=1",children:'Becker, R. and Cleveland, W. (1987). "Brushing Scatterplots". Technometrics. 29 (2): 127-142.'}),Object(a.jsx)("br",{})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("a",{href:"https://www.jstor.org/stable/2289448?seq=1",children:'Stuetzle, W. (1987). "Plot Windows". Journal of the American Statistical Association. 82 (398): 466-475.'}),Object(a.jsx)("br",{})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("a",{href:"https://www.oreilly.com/library/view/designing-interfaces-3rd/9781492051954/",children:"Tidwell, J. (2006). Designing Interfaces, First Edition, 182. O'Reilly Media Inc., Sebastopol CA."}),Object(a.jsx)("br",{}),'"Consider leaving the box onscreen after the selection gesture."']})]})]}),Object(a.jsx)("a",{href:"https://github.com/hemanrobinson/brush/",children:"Code Shared on GitHub"})]})});p.getPower=function(e){return(e%3===0?1:e%3===1?2:5)*Math.pow(10,Math.floor(e/3))};var v=p;o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.e92041db.chunk.js.map