(this.webpackJsonpbrush=this.webpackJsonpbrush||[]).push([[0],{83:function(e,t,i){},85:function(e,t,i){},86:function(e,t,i){},91:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i(0),s=i.n(n),r=i(15),o=i.n(r),h=(i(83),i(23)),d=i(102),l=i(5),c=function(e){};c.isSelected=[],c.deselectAll=function(){c.isSelected.fill(!1)},c.getColumnNames=function(){return["isSelected","A","B","A + B","A * B"]},c.getDomain=function(e,t){return[-2,2]},c.values=[],c.getValues=function(e){if(c.values.length!==e){var t=l.a(0,.5);c.values=[];for(var i=0;i<e;i++){var a=t(),n=t();c.values[i]=[!1,a,n,a+n,a*n]}}return c.values};var u=c,f=function(e){};f.draw=function(e,t,i,a,n,s,r){var o=n.getContext("2d"),h=u.getColumnNames();o.fillStyle="#000000",o.fontSize="14px";var d=h[r];o.fillText(d,e+i/2-o.measureText(d).width/2,t+a-a/2+4),o.fontSize="10px",d=(""+u.getDomain(s,r)[0]).slice(0,4),o.fillText(d,e+4,t+a-4),d=(""+u.getDomain(s,r)[1]).slice(0,3),o.fillText(d,e+i-3-o.measureText(d).width,t+12)};var b=f,g=function(e){};g.padding=10,g.normalize=function(e){var t=e.x,i=e.y,a=e.width,n=e.height;return a<0&&(t+=a,a=-a),n<0&&(i+=n,n=-n),{x:t,y:i,width:a,height:n}},g.isWithin=function(e,t,i){var a=g.normalize(t);return void 0!==i&&(a.x-=i,a.y-=i,a.width+=2*i,a.height+=2*i),a.x<=e.x&&e.x<a.x+a.width&&a.y<=e.y&&e.y<a.y+a.height},g.draw=function(e,t,i,a,n,s,r,o,h,d,c){var f=n.getContext("2d"),b=g.padding,w=u.getValues(s),v=l.b().domain(u.getDomain(s,r)).range([e+b,e+i-b]),x=l.b().domain(u.getDomain(s,o)).range([t+a-b,t+b]),m=d;if(void 0===m){var p=(m=f.createImageData(i,a)).data;w.forEach((function(n){var s=v(n[r])-e,d=x(n[o])-t;if(0<=s&&s<i&&0<=d&&d<a){var l=Math.floor(d)*(4*i)+4*Math.floor(s);p[l]=Math.round(0+p[l]*(1-h)),p[l+1]=Math.round(0+p[l+1]*(1-h)),p[l+2]=Math.round(0+p[l+2]*(1-h)),p[l+3]=Math.round(255*h+p[l+3]*(1-h))}}))}var y=f.createImageData(i,a);y.data.set(m.data);var M=y.data;if(void 0!==c)c.forEach((function(n){var s=v(w[n][r])-e,d=x(w[n][o])-t;if(0<=s&&s<i&&0<=d&&d<a){var l=Math.floor(d)*(4*i)+4*Math.floor(s);M[l]=Math.round(255+M[l]*(1-h))}}));else{var j=0;w.forEach((function(n){if(u.isSelected[j]){var s=v(n[r])-e,d=x(n[o])-t;if(0<=s&&s<i&&0<=d&&d<a){var l=Math.floor(d)*(4*i)+4*Math.floor(s);M[l]=Math.round(255+M[l]*(1-h))}}j++}))}return f.putImageData(y,e,t,b,b,i-b,a-b),m},g.select=function(e,t,i,a,n,s,r,o){var h=g.padding,d=[],c=u.getValues(n),f=l.b().domain(u.getDomain(n,s)).range([e+h,e+i-h]),b=l.b().domain(u.getDomain(n,r)).range([t+a-h,t+h]),w=f.invert(Math.min(o.x,o.x+o.width)),v=f.invert(Math.max(o.x,o.x+o.width)),x=b.invert(Math.max(o.y,o.y+o.height)),m=b.invert(Math.min(o.y,o.y+o.height)),p=0;return c.forEach((function(e){u.isSelected[p]=w<=e[s]&&e[s]<v&&x<=e[r]&&e[r]<m,u.isSelected[p]&&d.push(p),p++})),d};var w=g,v=(i(85),function e(t){var i=Object(n.useRef)(),s=t.nData,r=t.opacity,o=u.getColumnNames().length,h=function(t){e.onMouseUp(t,200,200,i,s,r)};return Object(n.useEffect)((function(){e.draw(200,200,i,s,r)})),Object(a.jsx)("canvas",{width:200*(o-1),height:200*(o-1),ref:i,onMouseDown:function(t){e.onMouseDown(t)},onMouseMove:h,onMouseUp:h})});v.handleSize=3,v.isGrowing=!1,v.isXMin=!1,v.isYMin=!1,v.isMoving=!1,v.isWithin=!1,v.bitmaps=void 0,v.selectedRows=void 0,v.brush={x:430,y:230,width:30,height:30},v.downLocation={x:-1,y:-1},v.clear=function(){v.bitmaps=void 0,v.selectedRows=void 0,u.deselectAll(),v.brush={x:430,y:230,width:30,height:30},v.downLocation={x:-1,y:-1}},v.onMouseDown=function(e){var t=v.handleSize,i=t/2,a=2*t,n=e.nativeEvent.offsetX,s=e.nativeEvent.offsetY,r=v.brush;if(e.preventDefault(),v.downLocation.x=n,v.downLocation.y=s,w.isWithin({x:n,y:s},r,v.handleSize)){var o=!1,h=!1,d=!1,l=!1;r.width>=0?Math.abs(r.x+r.width-i-n)<=a?h=!0:Math.abs(r.x+i-n)<=a&&(o=!0):Math.abs(r.x+r.width+i-n)<=a?o=!0:Math.abs(r.x-i-n)<=a&&(h=!0),r.height>=0?Math.abs(r.y+r.height-i-s)<=a?d=!0:Math.abs(r.y+i-s)<=a&&(l=!0):Math.abs(r.y+r.height+i-s)<=a?l=!0:Math.abs(r.y-i-s)<=a&&(d=!0),v.isGrowing=!1,v.isMoving=!1,(o||h)&&(d||l)?(v.isGrowing=!0,v.isXMin=o,v.isYMin=d):v.isMoving=!0}else v.brush.x=n,v.brush.y=s,v.brush.width=0,v.brush.height=0,v.isGrowing=!0,v.isXMin=!1,v.isYMin=!0,v.isMoving=!1;v.isWithin=!0},v.onMouseUp=function(e,t,i,a,n,s){var r=v.downLocation.x,o=v.downLocation.y,h=e.nativeEvent.offsetX,d=e.nativeEvent.offsetY,l=Math.floor(r/t),c=Math.floor(o/i),f=l*t,b=c*i,g=v.brush;if(r<0||o<0){var x=w.isWithin({x:h,y:d},g,v.handleSize);if(v.isWithin!==x){if(v.isWithin=x,!x)for(var m=a.current,p=m.getContext("2d"),y=u.getColumnNames().length,M=1;M<y;M++)for(var j=1;j<y;j++){var O=(M-1)*t,S=(j-1)*i;M!==j&&w.isWithin({x:h,y:d},{x:O,y:S,width:t,height:i},v.handleSize)&&(p.clearRect(O+1,S+1,t-1,i-1),w.draw(O,S,t,i,m,n,M,j,s,v.bitmaps[M-1][j-1],v.selectedRows))}v.drawBrush(a)}}else l===c?"mouseup"===e.type&&(u.deselectAll(),v.selectedRows=void 0,v.draw(t,i,a,n,s)):(v.isGrowing?(h=Math.min(f+t-1,Math.max(f+1,h)),d=Math.min(b+i-1,Math.max(b+1,d)),v.isXMin?(g.width-=h-g.x,g.x=h):g.width=h-g.x,v.isYMin?g.height=d-g.y:(g.height-=d-g.y,g.y=d)):v.isMoving&&(g.x+=h-r,g.y+=d-o,v.downLocation.x=h,v.downLocation.y=d,g.x<f+1&&(g.x=f+1),g.x>f+t-1-g.width&&(g.x=f+t-1-g.width),g.y<b+1&&(g.y=b+1),g.y>b+i-1-g.height&&(g.y=b+i-1-g.height)),v.selectedRows=w.select(f,b,t,i,n,l+1,c+1,g),v.draw(t,i,a,n,s));"mouseup"===e.type&&(v.downLocation.x=-1,v.downLocation.y=-1,v.isGrowing=!1,v.isXMin=!1,v.isYMin=!1,v.isMoving=!1,g.width<0&&(g.x+=g.width,g.width=-g.width),g.height<0&&(g.y+=g.height,g.height=-g.height))},v.draw=function(e,t,i,a,n){if(i){var s=i.current,r=s.getContext("2d"),o=u.getColumnNames().length;if(r){r.clearRect(0,0,(o-1)*e,(o-1)*t),r.strokeStyle="#a0a0a0";for(var h=1;h<o-1;h++)r.moveTo(h*e+.5,0),r.lineTo(h*e+.5,(o-1)*t),r.moveTo(0,h*t+.5),r.lineTo((o-1)*e,h*t+.5);r.stroke();var d=!v.bitmaps;d&&(v.bitmaps=[]);for(var l=1;l<o;l++)for(var c=1;c<o;c++){var f=(l-1)*e,g=(c-1)*t;l===c?b.draw(f,g,e,t,s,a,l):d?(void 0===v.bitmaps[l-1]&&(v.bitmaps[l-1]=[]),v.bitmaps[l-1][c-1]=w.draw(f,g,e,t,s,a,l,c,n)):w.draw(f,g,e,t,s,a,l,c,n,v.bitmaps[l-1][c-1],v.selectedRows)}v.drawBrush(i)}}},v.drawBrush=function(e){var t=v.brush;if(t.x>=0&&t.y>=0){var i=v.handleSize,a=w.normalize(t);a.x=Math.floor(a.x)+.5,a.y=Math.floor(a.y)+.5,a.width=Math.round(a.width),a.height=Math.round(a.height);var n=e.current.getContext("2d");n.strokeStyle="#99bbdd",n.fillStyle="#99bbdd",n.strokeRect(a.x,a.y,a.width,a.height),v.isWithin&&a.width>=i&&a.height>=i&&(n.fillRect(a.x+1,a.y+1,i,i),n.fillRect(a.x+a.width-i-1,a.y+1,i,i),n.fillRect(a.x+1,a.y+a.height-i-1,i,i),n.fillRect(a.x+a.width-i-1,a.y+a.height-i-1,i,i))}};var x=v,m=(i(86),function e(){var t=Object(n.useState)(e.getPower(12)),i=Object(h.a)(t,2),s=i[0],r=i[1],o=Object(n.useState)(.5),l=Object(h.a)(o,2),c=l[0],u=l[1];return Object(a.jsxs)("div",{className:"Column",children:[Object(a.jsx)("div",{className:"Description",children:Object(a.jsx)("h1",{children:"Brushing a Million"})}),Object(a.jsx)("div",{className:"GridPlots",children:Object(a.jsx)(x,{nData:s,opacity:c})}),Object(a.jsxs)("div",{className:"GridControls",children:[Object(a.jsx)("label",{children:"Points:"}),Object(a.jsx)(d.a,{defaultValue:12,step:1,min:6,max:18,valueLabelDisplay:"auto",marks:!0,valueLabelFormat:function(t){return e.getPower(t).toExponential()},onChangeCommitted:function(t,i){x.clear(),r(e.getPower(i))}}),Object(a.jsx)("label",{children:"Transparency:"}),Object(a.jsx)(d.a,{defaultValue:.5,step:.01,min:0,max:1,valueLabelDisplay:"auto",onChangeCommitted:function(e,t){x.clear(),u(1-t)}})]}),Object(a.jsxs)("div",{className:"Description",children:[Object(a.jsxs)("p",{children:["Brushing is a basic technique of exploratory data analysis, developed in the 1970s (",Object(a.jsx)("a",{href:"https://www.researchgate.net/publication/245345268_An_interactive_multidimensional_data_display_and_analysis_system",children:"Fishkeller, Friedman, and Tukey"}),") and 1980s (",Object(a.jsx)("a",{href:"https://www.jstor.org/stable/1269768?seq=1",children:"Becker and Cleveland"}),"; ",Object(a.jsx)("a",{href:"https://www.jstor.org/stable/2289448?seq=1",children:"Stuetzle"}),")."]}),Object(a.jsx)("p",{children:"Back then, analysts were happy to brush a few hundred points.  On modern hardware, we can brush a million."})]}),Object(a.jsxs)("div",{className:"Description",children:[Object(a.jsx)("h2",{children:"About This User Interface"}),Object(a.jsx)("p",{children:"The colors in this example are chosen to emphasize the data.  Black on white gives maximum emphasis.  The grid, being less important, is gray.  The red selection color draws attention.  The brush is blue because blue is the default selection color in most web browsers."}),Object(a.jsx)("p",{children:"The brush is persistent rather than transient.  A persistent brush reduces errors by giving the user repeated chances to adjust the brush size.  Also, a persistent brush supports sharing of the data patterns found during brushing."}),Object(a.jsx)("p",{children:"Handles to resize the brush appear only when they can be used.  Otherwise, handles are omitted to minimize interference with the data."})]}),Object(a.jsx)("a",{href:"https://github.com/hemanrobinson/brush/",children:"Code Shared on GitHub"})]})});m.getPower=function(e){return(e%3===0?1:e%3===1?2:5)*Math.pow(10,Math.floor(e/3))};var p=m;o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(p,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.16005386.chunk.js.map