(this.webpackJsonpbrush=this.webpackJsonpbrush||[]).push([[0],{83:function(e,t,i){},85:function(e,t,i){},86:function(e,t,i){},91:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i(0),s=i.n(n),o=i(15),r=i.n(o),h=(i(83),i(23)),d=i(102),c=i(5),l=function(e){};l.isSelected=[],l.deselectAll=function(){l.isSelected.fill(!1)},l.getColumnNames=function(){return["isSelected","A","B","A + B","A * B"]},l.getDomain=function(e,t){return[-2,2]},l.values=[],l.getValues=function(e){if(l.values.length!==e){var t=c.a(0,.5);l.values=[];for(var i=0;i<e;i++){var a=t(),n=t();l.values[i]=[!1,a,n,a+n,a*n]}}return l.values};var u=l,f=function(e){};f.draw=function(e,t,i,a,n,s,o){var r=n.getContext("2d"),h=u.getColumnNames();r.fillStyle="#000000",r.fontSize="14px";var d=h[o];r.fillText(d,e+i/2-r.measureText(d).width/2,t+a-a/2+4),r.fontSize="10px",d=(""+u.getDomain(s,o)[0]).slice(0,4),r.fillText(d,e+4,t+a-4),d=(""+u.getDomain(s,o)[1]).slice(0,3),r.fillText(d,e+i-3-r.measureText(d).width,t+12)};var b=f,v=function(e){};v.padding=10,v.normalize=function(e){var t=e.x,i=e.y,a=e.width,n=e.height;return a<0&&(t+=a,a=-a),n<0&&(i+=n,n=-n),{x:t,y:i,width:a,height:n}},v.isWithin=function(e,t,i){var a=v.normalize(t);return void 0!==i&&(a.x-=i,a.y-=i,a.width+=2*i,a.height+=2*i),a.x<=e.x&&e.x<a.x+a.width&&a.y<=e.y&&e.y<a.y+a.height},v.draw=function(e,t,i,a,n,s,o,r,h,d,l){var f=n.getContext("2d"),b=v.padding,g=u.getValues(s),w=c.b().domain(u.getDomain(s,o)).range([e+b,e+i-b]),x=c.b().domain(u.getDomain(s,r)).range([t+a-b,t+b]),m=d;if(void 0===m){var p=(m=f.createImageData(i,a)).data;g.forEach((function(n){var s=w(n[o])-e,d=x(n[r])-t;if(0<=s&&s<i&&0<=d&&d<a){var c=Math.floor(d)*(4*i)+4*Math.floor(s);p[c]=Math.round(0+p[c]*(1-h)),p[c+1]=Math.round(0+p[c+1]*(1-h)),p[c+2]=Math.round(0+p[c+2]*(1-h)),p[c+3]=Math.round(255*h+p[c+3]*(1-h))}}))}var y=f.createImageData(i,a);y.data.set(m.data);var j=y.data;if(void 0!==l)l.forEach((function(n){var s=w(g[n][o])-e,d=x(g[n][r])-t;if(0<=s&&s<i&&0<=d&&d<a){var c=Math.floor(d)*(4*i)+4*Math.floor(s);j[c]=Math.round(255+j[c]*(1-h))}}));else{var M=0;g.forEach((function(n){if(u.isSelected[M]){var s=w(n[o])-e,d=x(n[r])-t;if(0<=s&&s<i&&0<=d&&d<a){var c=Math.floor(d)*(4*i)+4*Math.floor(s);j[c]=Math.round(255+j[c]*(1-h))}}M++}))}return f.putImageData(y,e,t,b,b,i-b,a-b),m},v.select=function(e,t,i,a,n,s,o,r){var h=v.padding,d=[],l=u.getValues(n),f=c.b().domain(u.getDomain(n,s)).range([e+h,e+i-h]),b=c.b().domain(u.getDomain(n,o)).range([t+a-h,t+h]),g=f.invert(Math.min(r.x,r.x+r.width)),w=f.invert(Math.max(r.x,r.x+r.width)),x=b.invert(Math.max(r.y,r.y+r.height)),m=b.invert(Math.min(r.y,r.y+r.height)),p=0;return l.forEach((function(e){u.isSelected[p]=g<=e[s]&&e[s]<w&&x<=e[o]&&e[o]<m,u.isSelected[p]&&d.push(p),p++})),d};var g=v,w=(i(85),function e(t){var i=200,s=200,o=Object(n.useRef)(),r=t.nData,h=t.opacity,d=u.getColumnNames().length,c=function(t){e.onMouseUp(t,i,s,o,r,h)};return Object(n.useEffect)((function(){var t=e.brush;e.downLocation={x:t.x,y:t.y};var a={type:"mouseup",nativeEvent:{offsetX:t.x+t.width,offsetY:t.y+t.height}};e.onMouseUp(a,i,s,o,r,h),e.draw(i,s,o,r,h)})),Object(a.jsx)("canvas",{width:(d-1)*i,height:(d-1)*s,ref:o,onMouseDown:function(t){e.onMouseDown(t)},onMouseMove:c,onMouseUp:c})});w.handleSize=3,w.isGrowing=!1,w.isXMin=!1,w.isYMin=!1,w.isMoving=!1,w.isWithin=!1,w.bitmaps=void 0,w.selectedRows=void 0,w.brush={x:460,y:260,width:40,height:40},w.downLocation={x:-1,y:-1},w.clear=function(){w.bitmaps=void 0,w.selectedRows=void 0,u.deselectAll(),w.brush={x:-1,y:-1,width:0,height:0},w.downLocation={x:-1,y:-1}},w.onMouseDown=function(e){var t=w.handleSize,i=t/2,a=2*t,n=e.nativeEvent.offsetX,s=e.nativeEvent.offsetY,o=w.brush;if(e.preventDefault(),w.downLocation.x=n,w.downLocation.y=s,g.isWithin({x:n,y:s},o,w.handleSize)){var r=!1,h=!1,d=!1,c=!1;o.width>=0?Math.abs(o.x+o.width-i-n)<=a?h=!0:Math.abs(o.x+i-n)<=a&&(r=!0):Math.abs(o.x+o.width+i-n)<=a?r=!0:Math.abs(o.x-i-n)<=a&&(h=!0),o.height>=0?Math.abs(o.y+o.height-i-s)<=a?d=!0:Math.abs(o.y+i-s)<=a&&(c=!0):Math.abs(o.y+o.height+i-s)<=a?c=!0:Math.abs(o.y-i-s)<=a&&(d=!0),w.isGrowing=!1,w.isMoving=!1,(r||h)&&(d||c)?(w.isGrowing=!0,w.isXMin=r,w.isYMin=d):w.isMoving=!0}else w.brush.x=n,w.brush.y=s,w.brush.width=0,w.brush.height=0,w.isGrowing=!0,w.isXMin=!1,w.isYMin=!0,w.isMoving=!1;w.isWithin=!0},w.onMouseUp=function(e,t,i,a,n,s){var o=w.downLocation.x,r=w.downLocation.y,h=e.nativeEvent.offsetX,d=e.nativeEvent.offsetY,c=Math.floor(o/t),l=Math.floor(r/i),f=c*t,b=l*i,v=w.brush;if(o<0||r<0){var x=g.isWithin({x:h,y:d},v,w.handleSize);if(w.isWithin!==x){if(w.isWithin=x,!x)for(var m=a.current,p=m.getContext("2d"),y=u.getColumnNames().length,j=1;j<y;j++)for(var M=1;M<y;M++){var O=(j-1)*t,S=(M-1)*i;j!==M&&g.isWithin({x:h,y:d},{x:O,y:S,width:t,height:i},w.handleSize)&&(p.clearRect(O+1,S+1,t-1,i-1),g.draw(O,S,t,i,m,n,j,M,s,w.bitmaps[j-1][M-1],w.selectedRows))}w.drawBrush(a)}}else c===l?"mouseup"===e.type&&(u.deselectAll(),w.selectedRows=void 0,w.draw(t,i,a,n,s)):(w.isGrowing?(h=Math.min(f+t-1,Math.max(f+1,h)),d=Math.min(b+i-1,Math.max(b+1,d)),w.isXMin?(v.width-=h-v.x,v.x=h):v.width=h-v.x,w.isYMin?v.height=d-v.y:(v.height-=d-v.y,v.y=d)):w.isMoving&&(v.x+=h-o,v.y+=d-r,w.downLocation.x=h,w.downLocation.y=d,v.x<f+1&&(v.x=f+1),v.x>f+t-1-v.width&&(v.x=f+t-1-v.width),v.y<b+1&&(v.y=b+1),v.y>b+i-1-v.height&&(v.y=b+i-1-v.height)),w.selectedRows=g.select(f,b,t,i,n,c+1,l+1,v),w.draw(t,i,a,n,s));"mouseup"===e.type&&(w.downLocation.x=-1,w.downLocation.y=-1,w.isGrowing=!1,w.isXMin=!1,w.isYMin=!1,w.isMoving=!1,v.width<0&&(v.x+=v.width,v.width=-v.width),v.height<0&&(v.y+=v.height,v.height=-v.height))},w.draw=function(e,t,i,a,n){if(i){var s=i.current,o=s.getContext("2d"),r=u.getColumnNames().length;if(o){o.clearRect(0,0,(r-1)*e,(r-1)*t),o.strokeStyle="#a0a0a0";for(var h=1;h<r-1;h++)o.moveTo(h*e+.5,0),o.lineTo(h*e+.5,(r-1)*t),o.moveTo(0,h*t+.5),o.lineTo((r-1)*e,h*t+.5);o.stroke();var d=!w.bitmaps;d&&(w.bitmaps=[]);for(var c=1;c<r;c++)for(var l=1;l<r;l++){var f=(c-1)*e,v=(l-1)*t;c===l?b.draw(f,v,e,t,s,a,c):d?(void 0===w.bitmaps[c-1]&&(w.bitmaps[c-1]=[]),w.bitmaps[c-1][l-1]=g.draw(f,v,e,t,s,a,c,l,n)):g.draw(f,v,e,t,s,a,c,l,n,w.bitmaps[c-1][l-1],w.selectedRows)}w.drawBrush(i)}}},w.drawBrush=function(e){var t=w.brush;if(t.x>=0&&t.y>=0){var i=w.handleSize,a=g.normalize(t);a.x=Math.floor(a.x)+.5,a.y=Math.floor(a.y)+.5,a.width=Math.round(a.width),a.height=Math.round(a.height);var n=e.current.getContext("2d");n.strokeStyle="#99bbdd",n.fillStyle="#99bbdd",n.strokeRect(a.x,a.y,a.width,a.height),w.isWithin&&a.width>=i&&a.height>=i&&(n.fillRect(a.x+1,a.y+1,i,i),n.fillRect(a.x+a.width-i-1,a.y+1,i,i),n.fillRect(a.x+1,a.y+a.height-i-1,i,i),n.fillRect(a.x+a.width-i-1,a.y+a.height-i-1,i,i))}};var x=w,m=(i(86),function e(){var t=Object(n.useState)(e.getPower(12)),i=Object(h.a)(t,2),s=i[0],o=i[1],r=Object(n.useState)(.5),c=Object(h.a)(r,2),l=c[0],u=c[1];return Object(a.jsxs)("div",{className:"Column",children:[Object(a.jsx)("div",{className:"Description",children:Object(a.jsx)("h1",{children:"Brushing a Million"})}),Object(a.jsx)("div",{className:"GridPlots",children:Object(a.jsx)(x,{nData:s,opacity:l})}),Object(a.jsxs)("div",{className:"GridControls",children:[Object(a.jsx)("label",{children:"Points:"}),Object(a.jsx)(d.a,{defaultValue:12,step:1,min:6,max:18,valueLabelDisplay:"auto",marks:!0,valueLabelFormat:function(t){return e.getPower(t).toExponential()},onChangeCommitted:function(t,i){x.clear(),o(e.getPower(i))}}),Object(a.jsx)("label",{children:"Transparency:"}),Object(a.jsx)(d.a,{defaultValue:.5,step:.01,min:0,max:1,valueLabelDisplay:"auto",onChangeCommitted:function(e,t){x.clear(),u(1-t)}})]}),Object(a.jsxs)("div",{className:"Description",children:[Object(a.jsxs)("p",{children:["Brushing is a basic technique of exploratory data analysis, developed in the 1970s (",Object(a.jsx)("a",{href:"https://www.researchgate.net/publication/245345268_An_interactive_multidimensional_data_display_and_analysis_system",children:"Fishkeller, Friedman, and Tukey"}),") and 1980s (",Object(a.jsx)("a",{href:"https://www.jstor.org/stable/1269768?seq=1",children:"Becker and Cleveland"}),"; ",Object(a.jsx)("a",{href:"https://www.jstor.org/stable/2289448?seq=1",children:"Stuetzle"}),")."]}),Object(a.jsx)("p",{children:"Back then, analysts were happy to brush a few hundred points.  On modern hardware, we can brush a million."})]}),Object(a.jsxs)("div",{className:"Description",children:[Object(a.jsx)("h2",{children:"About This User Interface"}),Object(a.jsx)("p",{children:"The colors in this example are chosen to emphasize the data.  Black on white gives maximum emphasis.  The grid, being less important, is gray.  The red selection color draws attention.  The brush is blue because blue is the default selection color in most web browsers."}),Object(a.jsxs)("p",{children:["The brush is ",Object(a.jsx)("em",{children:"persistent"})," rather than ",Object(a.jsx)("em",{children:"transient"}),".  A persistent brush reduces errors by giving the user repeated chances to adjust the brush size.  Also, a persistent brush supports sharing of the data patterns found during brushing."]}),Object(a.jsx)("p",{children:"Handles to resize the brush appear only when they can be used.  Otherwise, handles are omitted to minimize interference with the data."})]}),Object(a.jsx)("a",{href:"https://github.com/hemanrobinson/brush/",children:"Code Shared on GitHub"})]})});m.getPower=function(e){return(e%3===0?1:e%3===1?2:5)*Math.pow(10,Math.floor(e/3))};var p=m;r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(p,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.0bd0b909.chunk.js.map