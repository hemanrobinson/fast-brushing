(this.webpackJsonpbrush=this.webpackJsonpbrush||[]).push([[0],{83:function(e,t,i){},85:function(e,t,i){},86:function(e,t,i){},91:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i(0),o=i.n(n),s=i(15),r=i.n(s),h=(i(83),i(23)),d=i(102),l=i(5),c=function(e){};c.isSelected=[],c.deselectAll=function(){c.isSelected.fill(!1)},c.getColumnNames=function(){return["isSelected","A","B","A + B","A * B"]},c.getDomain=function(e,t){return[-2,2]},c.values=[],c.getValues=function(e){if(c.values.length!==e){var t=l.a(0,.5);c.values=[];for(var i=0;i<e;i++){var a=t(),n=t();c.values[i]=[!1,a,n,a+n,a*n]}}return c.values};var u=c,f=function(e){};f.draw=function(e,t,i,a,n,o,s){var r=n.getContext("2d"),h=u.getColumnNames();r.fillStyle="#000000",r.fontSize="14px";var d=h[s];r.fillText(d,e+i/2-r.measureText(d).width/2,t+a-a/2+4),r.fontSize="10px",d=(""+u.getDomain(o,s)[0]).slice(0,4),r.fillText(d,e+4,t+a-4),d=(""+u.getDomain(o,s)[1]).slice(0,3),r.fillText(d,e+i-3-r.measureText(d).width,t+12)};var w=f,b=function(e){};b.padding=10,b.normalize=function(e){var t=e.x,i=e.y,a=e.width,n=e.height;return a<0&&(t+=a,a=-a),n<0&&(i+=n,n=-n),{x:t,y:i,width:a,height:n}},b.isWithin=function(e,t,i){var a=b.normalize(t);return void 0!==i&&(a.x-=i,a.y-=i,a.width+=2*i,a.height+=2*i),a.x<=e.x&&e.x<a.x+a.width&&a.y<=e.y&&e.y<a.y+a.height},b.draw=function(e,t,i,a,n,o,s,r,h,d,c){var f=n.getContext("2d"),w=b.padding,g=u.getValues(o),v=l.b().domain(u.getDomain(o,s)).range([e+w,e+i-w]),m=l.b().domain(u.getDomain(o,r)).range([t+a-w,t+w]),x=d;if(void 0===x){var y=(x=f.createImageData(i,a)).data;g.forEach((function(n){var o=v(n[s])-e,d=m(n[r])-t;if(0<=o&&o<i&&0<=d&&d<a){var l=Math.floor(d)*(4*i)+4*Math.floor(o);y[l]=Math.round(0+y[l]*(1-h)),y[l+1]=Math.round(0+y[l+1]*(1-h)),y[l+2]=Math.round(0+y[l+2]*(1-h)),y[l+3]=Math.round(255*h+y[l+3]*(1-h))}}))}var p=f.createImageData(i,a);p.data.set(x.data);var M=p.data;if(void 0!==c)c.forEach((function(n){var o=v(g[n][s])-e,d=m(g[n][r])-t;if(0<=o&&o<i&&0<=d&&d<a){var l=Math.floor(d)*(4*i)+4*Math.floor(o);M[l]=Math.round(255+M[l]*(1-h))}}));else{var j=0;g.forEach((function(n){if(u.isSelected[j]){var o=v(n[s])-e,d=m(n[r])-t;if(0<=o&&o<i&&0<=d&&d<a){var l=Math.floor(d)*(4*i)+4*Math.floor(o);M[l]=Math.round(255+M[l]*(1-h))}}j++}))}return f.putImageData(p,e,t,w,w,i-w,a-w),x},b.select=function(e,t,i,a,n,o,s,r){var h=b.padding,d=[],c=u.getValues(n),f=l.b().domain(u.getDomain(n,o)).range([e+h,e+i-h]),w=l.b().domain(u.getDomain(n,s)).range([t+a-h,t+h]),g=f.invert(Math.min(r.x,r.x+r.width)),v=f.invert(Math.max(r.x,r.x+r.width)),m=w.invert(Math.max(r.y,r.y+r.height)),x=w.invert(Math.min(r.y,r.y+r.height)),y=0;return c.forEach((function(e){u.isSelected[y]=g<=e[o]&&e[o]<v&&m<=e[s]&&e[s]<x,u.isSelected[y]&&d.push(y),y++})),d};var g=b,v=(i(85),function e(t){var i=Object(n.useRef)(),o=t.nData,s=t.opacity,r=u.getColumnNames().length,h=function(t){e.onMouseUp(t,200,200,i,o,s)};return Object(n.useEffect)((function(){e.draw(200,200,i,o,s)})),Object(a.jsx)("canvas",{width:200*(r-1),height:200*(r-1),ref:i,onMouseDown:function(t){e.onMouseDown(t)},onMouseMove:h,onMouseUp:h})});v.handleSize=3,v.isGrowing=!1,v.isXMin=!1,v.isYMin=!1,v.isMoving=!1,v.isWithin=!1,v.bitmaps=void 0,v.selectedRows=void 0,v.brush={x:430,y:230,width:30,height:30},v.downLocation={x:-1,y:-1},v.clear=function(){v.bitmaps=void 0,v.selectedRows=void 0,u.deselectAll(),v.brush={x:430,y:230,width:30,height:30},v.downLocation={x:-1,y:-1}},v.onMouseDown=function(e){var t=v.handleSize,i=t/2,a=2*t,n=e.nativeEvent.offsetX,o=e.nativeEvent.offsetY,s=v.brush;if(e.preventDefault(),v.downLocation.x=n,v.downLocation.y=o,v.isWithin=!0,g.isWithin({x:n,y:o},s,v.handleSize)){var r=!1,h=!1,d=!1,l=!1;s.width>=0?Math.abs(s.x+s.width-i-n)<=a?h=!0:Math.abs(s.x+i-n)<=a&&(r=!0):Math.abs(s.x+s.width+i-n)<=a?r=!0:Math.abs(s.x-i-n)<=a&&(h=!0),s.height>=0?Math.abs(s.y+s.height-i-o)<=a?d=!0:Math.abs(s.y+i-o)<=a&&(l=!0):Math.abs(s.y+s.height+i-o)<=a?l=!0:Math.abs(s.y-i-o)<=a&&(d=!0),v.isGrowing=!1,v.isMoving=!1,(r||h)&&(d||l)?(v.isGrowing=!0,v.isXMin=r,v.isYMin=d):v.isMoving=!0}else v.brush.x=n,v.brush.y=o,v.brush.width=0,v.brush.height=0,v.isGrowing=!0,v.isXMin=!1,v.isYMin=!0,v.isMoving=!1},v.onMouseUp=function(e,t,i,a,n,o){var s=v.downLocation.x,r=v.downLocation.y,h=e.nativeEvent.offsetX,d=e.nativeEvent.offsetY,l=Math.floor(s/t),c=Math.floor(r/i),f=l*t,w=c*i,b=v.brush;if(s<0||r<0){var m=g.isWithin({x:h,y:d},b,v.handleSize);if(v.isWithin!==m){if(v.isWithin=m,!m)for(var x=a.current,y=u.getColumnNames().length,p=1;p<y;p++)for(var M=1;M<y;M++){var j=(p-1)*t,O=(M-1)*i;p!==M&&g.isWithin({x:h,y:d},{x:j,y:O,width:t,height:i},v.handleSize)&&g.draw(j,O,t,i,x,n,p,M,o,v.bitmaps[p-1][M-1],v.selectedRows)}v.drawBrush(a)}}else l===c?"mouseup"===e.type&&(u.deselectAll(),v.selectedRows=void 0,v.draw(t,i,a,n,o)):(v.isGrowing?(h=Math.min(f+t-1,Math.max(f+1,h)),d=Math.min(w+i-1,Math.max(w+1,d)),v.isXMin?(b.width-=h-b.x,b.x=h):b.width=h-b.x,v.isYMin?b.height=d-b.y:(b.height-=d-b.y,b.y=d)):v.isMoving&&(b.x+=h-s,b.y+=d-r,v.downLocation.x=h,v.downLocation.y=d,b.x<f+1&&(b.x=f+1),b.x>f+t-1-b.width&&(b.x=f+t-1-b.width),b.y<w+1&&(b.y=w+1),b.y>w+i-1-b.height&&(b.y=w+i-1-b.height)),v.selectedRows=g.select(f,w,t,i,n,l+1,c+1,b),v.draw(t,i,a,n,o));"mouseup"===e.type&&(v.downLocation.x=-1,v.downLocation.y=-1,v.isGrowing=!1,v.isXMin=!1,v.isYMin=!1,v.isMoving=!1,b.width<0&&(b.x+=b.width,b.width=-b.width),b.height<0&&(b.y+=b.height,b.height=-b.height))},v.draw=function(e,t,i,a,n){if(i){var o=i.current,s=o.getContext("2d"),r=u.getColumnNames().length;if(s){s.clearRect(0,0,(r-1)*e,(r-1)*t),s.strokeStyle="#a0a0a0";for(var h=1;h<r-1;h++)s.moveTo(h*e+.5,0),s.lineTo(h*e+.5,(r-1)*t),s.moveTo(0,h*t+.5),s.lineTo((r-1)*e,h*t+.5);s.stroke();var d=!v.bitmaps;d&&(v.bitmaps=[]);for(var l=1;l<r;l++)for(var c=1;c<r;c++){var f=(l-1)*e,b=(c-1)*t;l===c?w.draw(f,b,e,t,o,a,l):d?(void 0===v.bitmaps[l-1]&&(v.bitmaps[l-1]=[]),v.bitmaps[l-1][c-1]=g.draw(f,b,e,t,o,a,l,c,n)):g.draw(f,b,e,t,o,a,l,c,n,v.bitmaps[l-1][c-1],v.selectedRows)}v.drawBrush(i)}}},v.drawBrush=function(e){var t=v.brush;if(t.x>=0&&t.y>=0){var i=v.handleSize,a=g.normalize(t);a.x=Math.floor(a.x)+.5,a.y=Math.floor(a.y)+.5,a.width=Math.round(a.width),a.height=Math.round(a.height);var n=e.current.getContext("2d");n.strokeStyle="#99bbdd",n.fillStyle="#99bbdd",n.strokeRect(a.x,a.y,a.width,a.height),v.isWithin&&a.width>=i&&a.height>=i&&(n.fillRect(a.x+1,a.y+1,i,i),n.fillRect(a.x+a.width-i-1,a.y+1,i,i),n.fillRect(a.x+1,a.y+a.height-i-1,i,i),n.fillRect(a.x+a.width-i-1,a.y+a.height-i-1,i,i))}};var m=v,x=(i(86),function e(){var t=Object(n.useState)(e.getPower(12)),i=Object(h.a)(t,2),o=i[0],s=i[1],r=Object(n.useState)(.5),l=Object(h.a)(r,2),c=l[0],u=l[1];return Object(a.jsxs)("div",{className:"Column",children:[Object(a.jsx)("div",{className:"GridPlots",children:Object(a.jsx)(m,{nData:o,opacity:c})}),Object(a.jsxs)("div",{className:"GridControls",children:[Object(a.jsx)("label",{children:"Points:"}),Object(a.jsx)(d.a,{defaultValue:12,step:1,min:6,max:18,valueLabelDisplay:"auto",marks:!0,valueLabelFormat:function(t){return e.getPower(t).toExponential()},onChangeCommitted:function(t,i){m.clear(),s(e.getPower(i))}}),Object(a.jsx)("label",{children:"Transparency:"}),Object(a.jsx)(d.a,{defaultValue:.5,step:.01,min:0,max:1,valueLabelDisplay:"auto",onChangeCommitted:function(e,t){m.clear(),u(1-t)}})]}),Object(a.jsxs)("div",{className:"Description",children:[Object(a.jsxs)("p",{children:["Brushing is a basic technique of exploratory data analysis, developed in the 1970s (",Object(a.jsx)("a",{href:"https://www.researchgate.net/publication/245345268_An_interactive_multidimensional_data_display_and_analysis_system",children:"Fishkeller, Friedman, and Tukey"}),") and 1980s (",Object(a.jsx)("a",{href:"https://www.jstor.org/stable/1269768?seq=1",children:"Becker and Cleveland"}),"; ",Object(a.jsx)("a",{href:"https://www.jstor.org/stable/2289448?seq=1",children:"Stuetzle"}),"). Back then, analysts were happy to brush a few hundred points.  On modern hardware, we can brush a million."]}),Object(a.jsx)("p",{children:"The colors in this example are chosen to emphasize the data.  Black on white gives maximum emphasis.  The grid, being less important, is gray.  The red selection color draws attention.  The brush is blue because blue is the default selection color in most web browsers."}),Object(a.jsx)("p",{children:"The brush is persistent rather than transient.  A persistent brush reduces errors by giving the user repeated chances to adjust the brush size.  Also, a persistent brush supports sharing of the data patterns found during brushing."}),Object(a.jsx)("p",{children:"Handles to resize the brush appear only when they can be used.  Otherwise, handles are omitted to minimize interference with the data."})]}),Object(a.jsx)("a",{href:"https://github.com/hemanrobinson/brush/",children:"Code Shared on GitHub"})]})});x.getPower=function(e){return(e%3===0?1:e%3===1?2:5)*Math.pow(10,Math.floor(e/3))};var y=x;r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.4b00aa53.chunk.js.map